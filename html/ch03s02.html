<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>2.&nbsp;Joomla 3 MVC vs Joomla 4 MVC</title><link rel="stylesheet" type="text/css" href="html.css"><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"><link rel="home" href="index.html" title="Joomla Extensions Development"><link rel="up" href="ch03.html" title="Chapter&nbsp;3.&nbsp;Components"><link rel="prev" href="ch03s01.html" title="1.&nbsp;The Joomla MVC: an introduction"><link rel="next" href="ch03s03.html" title="3.&nbsp;The lifetime of a component"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">2.&nbsp;Joomla 3 MVC vs Joomla 4 MVC</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch03s01.html"><img src="images/prev.svg" alt="Prev"></a>&nbsp;</td><th width="60%" align="center">Chapter&nbsp;3.&nbsp;Components</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="ch03s03.html"><img src="images/next.svg" alt="Next"></a></td></tr></table><hr></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="com-j3-vs-j4-mvc"></a>2.&nbsp;Joomla 3 MVC vs Joomla 4 MVC</h2></div></div></div><p>As we already said, the basic functionality of Joomla's MVC has remained the same throughout Joomla 3 and 4. If you know how to make a Joomla 3 component you know most of what you need to make a Joomla 4 component. The differences are a few minor, but salient, points.</p><p><a class="link" href="ch03s08.html" title="8.&nbsp;Namespaces and MVC"><span class="bold"><strong>Namespaces</strong></span></a>. All native Joomla 4 component use <a class="link" href="https://www.php.net/manual/en/language.namespaces.php" target="_top">PHP namespaces</a> for their PHP code. This is a very simple change in thinking for models, views and controllers. For example, instead of your frontend model being called <code class="code">ExampleModelItem</code> it will now be the class <code class="code">ItemModel</code> in the namespace <span style="color: red">&lt;modifier&gt;<em class="replaceable"><code>\My\Prefix</code></em>\Site\Model&lt;/modifier&gt;</span> where <code class="code">\My\Prefix</code> is something you can define, and has no restrictions other than it needs to be a valid PHP namespace, unique to your component and should not start with <code class="code">\Joomla</code> (component namespaces starting withIn <code class="code">\Joomla</code> are reserved for core components). This also applies to custom form fields you may need to create in your component &#8212; and there <span class="emphasis"><em>is</em></span> a way to tell Joomla which namespace to look custom form fields in with new attributes in XML forms.</p><p><a class="link" href="ch03s05.html" title="5.&nbsp;Service provider"><span class="bold"><strong>Service provider</strong></span></a>. All Joomla components are passed a Dependency Injection Container (DIC) which is, in fact, a Service Locator. This even applies to components written with the Joomla 3 MVC as we'll see in <a class="link" href="ch03s03.html" title="3.&nbsp;The lifetime of a component">the lifetime of a component</a>. You can register services specific to your component in your service locator. At the very least, Joomla expects you to set up the <a class="link" href="ch03s06.html" title="6.&nbsp;Extension class">extension class</a> of your component. Unfortunately, even simple components need to have a service provider as there is no convention-over-configuration in Joomla 4's component DIC.</p><p><a class="link" href="ch03s06.html" title="6.&nbsp;Extension class"><span class="bold"><strong>Extension class</strong></span></a>. The extension class <span class="emphasis"><em>replaces</em></span> the entry point file (e.g. <code class="filename">administrator/components/com_example/example.php</code>) you had in Joomla 3 MVC. All components written with the Joomla 4 MVC have an extension class which extends from <code class="code">Joomla\CMS\Extension\MVCComponent</code>. It is used to register special services used when working with your component such as the <code class="code">MVCFactory</code> service (responsible for creating model, view and controller object instances), an <a class="link" href="ch03s14.html" title="14.&nbsp;HTML helper service">HTML helper service</a> which extends Joomla's HTMLHelper, a <a class="link" href="ch03s16.html" title="16.&nbsp;Router">Router service</a> for frontend search engine friendly (SEF) URL routing, and a <a class="link" href="ch03s15.html" title="15.&nbsp;Categories">Category service</a> if your component uses core Categories. It also returns your component's <a class="link" href="ch03s07.html" title="7.&nbsp;Dispatcher">Dispatcher</a> which is where the execution of your component starts. For very simple components you can even use the core MVCComponent class as your extension class, without sub-classing. See, for example, what the core <code class="code">com_actionlogs</code> component does.</p><p><span class="bold"><strong><a class="link" href="ch03s07.html" title="7.&nbsp;Dispatcher">Dispatcher</a> instead of a front controller</strong></span>. In the Joomla 3 MVC paradigm you had a <code class="filename">controller.php</code> file in the root of your component's directory structure. This was a front-controller, supposed to figure out which controller to use to handle the specified view and task in the request. This was a bit gimmicky and error-prone, especially if you had components capable of displaying more than one discrete types of information, e.g. a downloads repository would be able to display categories, releases in a category and files in a release which made for three discrete content types which had to be handled by the same front controller. The new Dispatcher does the same job, it works without sub-classing it for most simple extensions and benefits greatly the more complex extensions which need more involved request processing.</p><p><span class="bold"><strong><a class="link" href="ch03s14.html" title="14.&nbsp;HTML helper service">HTML helper</a> is a service</strong></span>. If you had ever registered an HTMLHelper class with static calls this is no longer the recommended method. If you need an HTML helper for your extension you need to register it through the extension class and its methods are no longer static. Since it's a real object instantiated by the extension object it has access to the component's DIC, therefore to any service you registered in your service provider or you were given by Joomla in the DIC. This makes helpers testable and means that they can access custom services (e.g. a shipping cost calculation service if you are writing an e-commerce component) without trying to contort your code.</p><p><span class="bold"><strong>New format for </strong></span><a class="link" href="ch03s16.html" title="16.&nbsp;Router"><span class="bold"><strong>Router</strong></span></a>. Joomla 4 comes with a new Router which is instantiated through a service. The new component router superclass allows you to write efficient routers without a lot of boilerplate, duplicated and convoluted code.</p></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch03s01.html"><img src="images/prev.svg" alt="Prev"></a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="ch03.html"><img src="images/up.svg" alt="Up"></a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="ch03s03.html"><img src="images/next.svg" alt="Next"></a></td></tr><tr><td width="40%" align="left" valign="top">1.&nbsp;The Joomla MVC: an introduction&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="index.html"><img src="images/home.svg" alt="Home"></a></td><td width="40%" align="right" valign="top">&nbsp;3.&nbsp;The lifetime of a component</td></tr></table></div></body></html>