<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>21.&nbsp;Language files</title><link rel="stylesheet" type="text/css" href="html.css"><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"><link rel="home" href="index.html" title="Joomla Extensions Development"><link rel="up" href="ch03.html" title="Chapter&nbsp;3.&nbsp;Components"><link rel="prev" href="ch03s20.html" title="20.&nbsp;Passing data from the backend to the JavaScript on the page"><link rel="next" href="ch03s22.html" title="22.&nbsp;Mail Templates"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">21.&nbsp;Language files</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch03s20.html"><img src="images/prev.svg" alt="Prev"></a>&nbsp;</td><th width="60%" align="center">Chapter&nbsp;3.&nbsp;Components</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="ch03s22.html"><img src="images/next.svg" alt="Next"></a></td></tr></table><hr></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="com-lang"></a>21.&nbsp;Language files</h2></div></div></div><p>The Joomla language files have not really changed much since Joomla 1.0. Joomla is using the <a class="link" href="https://en.wikipedia.org/wiki/INI_file" target="_top">INI format</a> with a few twists:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>The keys must always be in UPPERCASE. You cannot have keys in lowercase or MixedCase.</p></li><li class="listitem"><p>The values to the right of the equals sign must be enclosed in double quotes (<code class="code">"</code>).</p></li><li class="listitem"><p>If you want to use double quotes inside your values you need to escape them as <code class="code">\"</code>.</p></li><li class="listitem"><p>Some language strings are used in JavaScript code using a legacy method. They do not support escaped double quotes. Use single quotes (<code class="code">'</code>) instead, even for HTML attributes (yes, HTML allows you to do things like <code class="code">&lt;a href='https://www.example.com'&gt;example&lt;/a&gt;</code> even though attribute values <span class="emphasis"><em>should</em></span> use double quotes for compatibility with XHTML). If you want to put quotes around human-readable text you can also use calligraphic quotes: <code class="code">&#8220; &#8221; &#8216; &#8217;</code> and so on.</p></li><li class="listitem"><p>You can comment a line by putting a semicolon (<code class="code">;</code>) as its first character. Do not put semicolons at the end of strings, they might be parsed as part of the value.</p></li></ul></div><h3><a name="d0e6169"></a>No more language tags in filenames</h3><p>There is a pretty big change for language file <span class="emphasis"><em>naming</em></span> in Joomla 4 and beyond: <span class="bold"><strong>you must not use the language prefix</strong></span>.</p><p>In Joomla 1.5 to 3.10 inclusive language files were named like <code class="filename">en-GB.com_example.ini</code> (British English), <code class="filename">de-DE.com_example.ini</code> (German, Germany) and <code class="filename">de-AT.com_example.ini</code> (German, Austria).</p><p>However, that naming was highly redundant as starting with Joomla 1.6 in 2010 the language files had to be placed in a folder whose name was the language tag itself! Inside a language folder you'd have the relative filepaths <code class="filename">en-GB/en-GB.com_example.ini</code>, <code class="filename">de-DE/de-DE.com_example.ini</code> and <code class="filename">de-AT/de-AT.com_example.ini</code>. Having the same language tag appear twice in a pathname didn't make sense. Therefore in Joomla 4 and beyond we no longer use the language tag prefix!</p><p>The files are now simply named similar to <code class="filename">com_example.ini</code>. The language of the file is inferred from the folder name it's in. For example, the filepath <code class="filename">en-GB/com_example.ini</code> obviously refers to British English.</p><h3><a name="d0e6209"></a>Component language files</h3><p>A component has multiple different language files. The base name of all files is the name of the Joomla component extension, e.g. <code class="code">com_example</code>:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Backend <code class="filename">com_example.sys.ini</code> &#8212; System language file. Required. Used to render the backend menu items and menu item types (for both front- and backend menu items).</p></li><li class="listitem"><p>Backend <code class="filename">com_example.ini</code> &#8212; Backend language file. Required. Used to render the backend interface and the component's Options page.</p></li><li class="listitem"><p>Frontend <code class="filename">com_example.ini</code> &#8212; Frontend language file. Optional (only if your component has a frontend part).</p></li><li class="listitem"><p>API <code class="filename">com_example.ini</code> &#8212; API application language file. Optional (only if your component has an API application integration).</p></li></ul></div><p>The language files are placed in the respective application's <code class="filename">language</code> subdirectory. For example, the backend language files for British English are placed in <code class="filename">administrator/language/en-GB</code>. Moreover, Joomla will fall back to the language subdirectory under your component. For example, the backend language files for British English are also sought for in <code class="filename">administrator/components/com_example/language/en-GB</code>. If files exist in both locations then <span class="emphasis"><em>only</em></span> the one in the application's directory will be loaded.</p><h3><a name="d0e6255"></a>Language file autoloading</h3><p>Unlike previous versions of Joomla, you do NOT have to load your language files manually. Joomla loads your component's language files automatically.</p><p>Since Joomla 3.3 (based on my recollection, +/- 1 minor version&#8230;) Joomla will load language files in this order:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>(Only if Debug Language is disabled). The language file for the site's default language (<code class="code">en-GB</code>, unless a third party extension has changed it).</p></li><li class="listitem"><p>The currently active language's normative INI file (e.g. <code class="code">com_example.ini</code>) or legacy INI file (e.g. <code class="code">en-GB.com_example.ini</code>).</p></li></ul></div><p>Joomla will first look in the current application's language folder i.e. <code class="filename">administrator/language</code> for the backend, <code class="filename">language</code> for the frontend and <code class="filename">api/language</code> for the API application.</p><p>If neither the current language's, nor the default language's files have been found Joomla will fall back to your component's <code class="filename">language</code> directory. That is to say, your component's language directory is a last resort and not guaranteed to be used!</p><p>You may wonder: why does Joomla load both the default language (British English in most cases) <span class="emphasis"><em>and</em></span> my current language (e.g. Canadian French) files? The reason is simple. All components are required to provide a complete language file for the default language which for Joomla is British English<a href="#ftn.d0e6298" class="footnote" name="d0e6298"><sup class="footnote">[4]</sup></a> (<code class="code">en-GB</code>). Translation to other languages are optional and often incomplete. Sometime around 2012 we decided that it makes far more sense to show an English, human-readable string to non-English speakers they can look up in the dictionary or their favorite translation tool than an incomprehensible language key like <code class="code">COM_EXAMPLE_ITEMS_SELECT_CATEGORY_DEFAULT_LABEL</code>. Of course this makes it harder for translators. That's why the Debug Language feature was simultaneously introduced. When enabled, the default language is not enabled and untranslated strings are marked clearly in the output.</p><h3><a name="d0e6313"></a>Defining language files in your XML manifest</h3><p>Your XML manifest needs one set of <code class="sgmltag-element">&lt;languages&gt;</code> tags per target application.</p><p>For the backend language files, you need to list them under the <code class="sgmltag-element">&lt;administration&gt;</code> tag:</p><pre class="programlisting">&lt;administration&gt;
  &lt;!-- &#8230; --&gt;
  &lt;languages folder="languages/admin"&gt;
    &lt;language tag="en-GB"&gt;en-GB/com_example.ini&lt;/language&gt;
    &lt;language tag="en-GB"&gt;en-GB/com_example.sys.ini&lt;/language&gt;
    &lt;language tag="de-DE"&gt;de-DE/com_example.ini&lt;/language&gt;
    &lt;language tag="de-DE"&gt;de-DE/com_example.sys.ini&lt;/language&gt;
  &lt;/languages&gt;
  &lt;!-- &#8230; --&gt;
&lt;/administration&gt;</pre><p>This copies the files from the <code class="filename">languages/admin</code> folder in your package to Joomla's admin language folder, e.g. the <code class="filename">languages/admin/en-GB/com_example.ini</code> file in your package to <code class="filename">administrator/language/en-GB/com_example.ini</code> file on your site.</p><p>For the frontend language files, if you have any, you need to list them directly under the <code class="sgmltag-element">&lt;extension&gt;</code> tag:</p><pre class="programlisting">&lt;extension&gt;
  &lt;!-- &#8230; --&gt;
  &lt;languages folder="languages/site"&gt;
    &lt;language tag="en-GB"&gt;en-GB/com_example.ini&lt;/language&gt;
    &lt;language tag="de-DE"&gt;de-DE/com_example.ini&lt;/language&gt;
  &lt;/languages&gt;
  &lt;!-- &#8230; --&gt;
&lt;/extension&gt;</pre><p>This copies the files from the <code class="filename">languages/site</code> folder in your package to Joomla's admin language folder, e.g. the <code class="filename">languages/site/en-GB/com_example.ini</code> file in your package to <code class="filename">language/en-GB/com_example.ini</code> file on your site.</p><p>For the API application language files, if you have any, you need to list them under the <code class="sgmltag-element">&lt;api&gt;</code> tag:</p><pre class="programlisting">&lt;api&gt;
  &lt;!-- &#8230; --&gt;
  &lt;languages folder="languages/api"&gt;
    &lt;language tag="en-GB"&gt;en-GB/com_example.ini&lt;/language&gt;
    &lt;language tag="de-DE"&gt;de-DE/com_example.ini&lt;/language&gt;
  &lt;/languages&gt;
  &lt;!-- &#8230; --&gt;
&lt;/api&gt;</pre><p>This copies the files from the <code class="filename">languages/api</code> folder in your package to Joomla's admin language folder, e.g. the <code class="filename">languages/api/en-GB/com_example.ini</code> file in your package to <code class="filename">api/language/en-GB/com_example.ini</code> file on your site.</p><h3><a name="d0e6374"></a>Languages and CLI</h3><p>CLI commands do <span class="emphasis"><em>not</em></span> load any language files automatically. You can either supply your language strings in the <code class="code">console</code> plugin which registers the commands or, more commonly, include them in your backend language file and have the plugin load that language file when registering the commands.</p><h3><a name="d0e6384"></a>Custom language files</h3><p>Beyond the regular <code class="filename">.ini</code> / <code class="filename">.sys.ini</code> files you can have any other language file you want. For example, you could have a <code class="filename">com_example.alt.ini</code> file which is only loaded when a specific option is enabled in your component. You can do that in your component's <a class="link" href="ch03s07.html" title="7.&nbsp;Dispatcher">Dispatcher</a>. For example:</p><pre class="programlisting">$this-&gt;app-&gt;getLanguage()-&gt;load($this-&gt;option . '.alt', JPATH_BASE)
  || $this-&gt;app-&gt;getLanguage()-&gt;load($this-&gt;option . '.alt', JPATH_COMPONENT)</pre><h3><a name="d0e6402"></a>Language overrides</h3><p>Language overrides are loaded <span class="emphasis"><em>before</em></span> any of your language files, at the initialisation of the CMSApplication object, namely when the Language object is constructed. They are stored in the file <code class="filename">language/overrides/<em class="replaceable"><code>LANGUAGE_TAG</code></em>.override.ini</code> under the application's root (site root for the frontend, <code class="filename">administrator</code> for the backend, <code class="filename">api</code> for the API application) where <em class="replaceable"><code>LANGUAGE_TAG</code></em> is the current language's tag, e.g. <code class="code">en-GB</code> for British English.</p><p>The way it works is that your language file is loaded and then the <span class="emphasis"><em>overridden</em></span> strings are replaced into the language file <span class="emphasis"><em>if and only if</em></span> they are already defined in the language file.</p><div class="caution"><table border="0" summary="Caution"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Caution]" src="images/caution.svg"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>This means that the language overrides cannot be used for language keys not defined in your language files, unlike Joomla 3.</p><p>Since this was a widely popular &#8220;trick&#8221; to allow your users to customise the display of your components you now have to take that explicitly into account. For example, given an item with an alias <code class="code">foobar</code> you might be looking for the language string <code class="code">COM_EXAMPLE_ITEM_OVERRIDE_FOOBAR_TITLE</code> to override the title field of your item for display in different languages. This worked in Joomla 3 but will NOT work in Joomla 4 or later.</p><p>You will need to provide an alternative mechanism for your users to provide custom translations. Remember the custom files I described just above? That's the alternative mechanism you can provide. DO NOT ship that file with your component. Just tell users to create it under their language folder and put their custom translations in there. It's far less user friendly than language overrides, unless of course you provide your own user interface for managing the contents of this file.</p></td></tr></table></div><div class="footnotes"><br><hr class="footnote-hr"><div id="ftn.d0e6298" class="footnote"><p><a href="#d0e6298" class="para"><sup class="para">[4] </sup></a>Joomla started as a fork of another CMS called Mambo back in 2005. Mambo was originally developed by an Australian company. Australian and British English use the same spelling and are mostly the same, so that company chose to make British English the default language for Mambo. When Joomla forked off Mambo it retained the default language despite the fact that the majority of its co-founders were not even native English speakers.</p><p>For the longest time Joomla's default language files were a mix of British, American and mangled English (most contributors are NOT native English speakers) but as of Joomla 3.9 a lot of effort has been put in British English being actually <span class="emphasis"><em>British</em></span> English. There are separate language packages for US American English (for those who prefer &#8216;colored trash cans&#8217; to &#8216;coloured rubbish bins&#8217;, for example) and other English spellings / dialects.</p></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch03s20.html"><img src="images/prev.svg" alt="Prev"></a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="ch03.html"><img src="images/up.svg" alt="Up"></a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="ch03s22.html"><img src="images/next.svg" alt="Next"></a></td></tr><tr><td width="40%" align="left" valign="top">20.&nbsp;Passing data from the backend to the JavaScript on the page&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="index.html"><img src="images/home.svg" alt="Home"></a></td><td width="40%" align="right" valign="top">&nbsp;22.&nbsp;Mail Templates</td></tr></table></div></body></html>